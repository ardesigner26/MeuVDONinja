<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Teste Específico - VDO.Ninja</title>
    <style>
        body { 
            background: #000; 
            color: #fff; 
            font-family: Arial; 
            padding: 20px;
            line-height: 1.6;
        }
        .log { 
            margin: 5px 0; 
            padding: 5px;
            border-left: 3px solid #333;
            padding-left: 10px;
        }
        .ok { border-color: #0f0; color: #0f0; }
        .error { border-color: #f00; color: #f00; }
        .warning { border-color: #ff0; color: #ff0; }
        .info { border-color: #0ff; color: #0ff; }
        
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background: #0056b3; }
    </style>
</head>
<body>
    <h1>🔍 Teste Específico - VDO.Ninja</h1>
    
    <div>
        <button onclick="testarArquivos()">🧪 Testar Arquivos</button>
        <button onclick="testarOriginal()">🌐 Abrir VDO.Ninja Original</button>
        <button onclick="limparLog()">🗑️ Limpar Log</button>
    </div>
    
    <div id="log"></div>
    
    <script>
        let logDiv = document.getElementById('log');
        
        function addLog(message, type = 'info') {
            let div = document.createElement('div');
            div.className = 'log ' + type;
            div.innerHTML = new Date().toLocaleTimeString() + ' - ' + message;
            logDiv.appendChild(div);
            console.log(message);
        }
        
        function limparLog() {
            logDiv.innerHTML = '';
        }
        
        function testarOriginal() {
            window.open('https://vdo.ninja', '_blank');
        }
        
        async function testarArquivos() {
            addLog('🔍 Iniciando teste de arquivos...', 'info');
            
            // Lista de arquivos para testar
            const arquivos = [
                'main.js',
                'webrtc.js', 
                'lib.js',
                'main.css',
                'translations/en.json'
            ];
            
            for (let arquivo of arquivos) {
                try {
                    addLog('📄 Testando: ' + arquivo, 'info');
                    
                    let response = await fetch(arquivo);
                    
                    if (response.ok) {
                        let content = await response.text();
                        addLog('✅ ' + arquivo + ' - ' + content.length + ' bytes', 'ok');
                        
                        // Teste específico para JavaScript
                        if (arquivo.endsWith('.js')) {
                            if (content.includes('function') || content.includes('=>')) {
                                addLog('✅ ' + arquivo + ' contém funções JavaScript', 'ok');
                            } else {
                                addLog('⚠️ ' + arquivo + ' pode não ser JavaScript válido', 'warning');
                            }
                            
                            // Verificar se tem erros óbvios
                            if (content.includes('SyntaxError') || content.includes('undefined is not')) {
                                addLog('❌ ' + arquivo + ' contém erros óbvios', 'error');
                            }
                        }
                        
                    } else {
                        addLog('❌ ' + arquivo + ' - Erro HTTP: ' + response.status, 'error');
                    }
                    
                } catch (error) {
                    addLog('❌ ' + arquivo + ' - Erro: ' + error.message, 'error');
                }
                
                // Pequena pausa entre testes
                await new Promise(resolve => setTimeout(resolve, 100));
            }
            
            addLog('🎯 Teste de arquivos concluído!', 'info');
            
            // Agora tentar carregar main.js dinamicamente
            addLog('🔧 Tentando carregar main.js dinamicamente...', 'info');
            
            try {
                let script = document.createElement('script');
                script.src = 'main.js';
                script.onload = function() {
                    addLog('✅ main.js carregado com sucesso!', 'ok');
                    
                    // Verificar se a função main existe
                    if (typeof main === 'function') {
                        addLog('✅ Função main() encontrada!', 'ok');
                    } else {
                        addLog('❌ Função main() não encontrada!', 'error');
                    }
                };
                script.onerror = function() {
                    addLog('❌ Erro ao carregar main.js!', 'error');
                };
                document.head.appendChild(script);
                
            } catch (error) {
                addLog('❌ Erro ao tentar carregar main.js: ' + error.message, 'error');
            }
        }
        
        // Capturar todos os erros JavaScript
        window.addEventListener('error', function(e) {
            addLog('❌ ERRO JS: ' + e.message + ' (linha: ' + e.lineno + ')', 'error');
        });
        
        // Capturar erros de console
        let originalConsoleError = console.error;
        console.error = function(...args) {
            addLog('❌ CONSOLE ERROR: ' + args.join(' '), 'error');
            originalConsoleError.apply(console, args);
        };
        
        addLog('✅ Teste específico carregado e pronto!', 'ok');
        addLog('👆 Clique em "Testar Arquivos" para começar', 'info');
    </script>
</body>
</html>
